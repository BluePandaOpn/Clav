<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KeyVault // Professional</title>
  <script src="https://unpkg.com/lucide@latest"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #ffffff;
      --fg: #0f172a;
      --border: #e2e8f0;
      --muted: #64748b;
      --accent: #0f172a;
      --subtle: #f8fafc;
      --success: #0f766e;
      --warning: #b45309;
      --danger: #be123c;
      --shadow: 0 10px 30px rgba(15, 23, 42, 0.08);
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #0a0a0a;
        --fg: #ffffff;
        --border: #262626;
        --muted: #a1a1aa;
        --accent: #ffffff;
        --subtle: #171717;
        --success: #2dd4bf;
        --warning: #f59e0b;
        --danger: #fb7185;
        --shadow: 0 18px 36px rgba(0, 0, 0, 0.35);
      }
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background:
        radial-gradient(circle at 20% 0%, rgba(148, 163, 184, 0.18), transparent 32%),
        var(--bg);
      color: var(--fg);
      font-family: "Inter", sans-serif;
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      min-height: 100vh;
    }

    .app-container {
      max-width: 1120px;
      margin: 0 auto;
      padding: 34px 20px 48px;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 22px;
      padding-bottom: 16px;
      border-bottom: 1px solid var(--border);
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 700;
      letter-spacing: -0.5px;
      font-size: 1.12rem;
    }

    .status {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-family: "JetBrains Mono", monospace;
      font-size: 0.72rem;
      color: var(--muted);
      border: 1px solid var(--border);
      background: var(--subtle);
      border-radius: 999px;
      padding: 6px 10px;
    }

    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--success);
      box-shadow: 0 0 0 4px color-mix(in srgb, var(--success) 24%, transparent);
      animation: pulse 1.8s infinite;
    }

    @keyframes pulse {
      0% { transform: scale(1); opacity: 1; }
      65% { transform: scale(1.3); opacity: .5; }
      100% { transform: scale(1); opacity: 1; }
    }

    .stats {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 12px;
      margin-bottom: 22px;
    }

    .stat-card {
      border: 1px solid var(--border);
      background: var(--subtle);
      border-radius: 12px;
      padding: 14px 14px 13px;
      box-shadow: var(--shadow);
    }

    .stat-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      color: var(--muted);
      font-size: 0.8rem;
      margin-bottom: 7px;
    }

    .stat-value {
      font-size: 1.36rem;
      font-weight: 700;
      letter-spacing: -0.03em;
    }

    .quick-form {
      display: grid;
      grid-template-columns: 1.1fr 1fr 1fr auto auto;
      gap: 10px;
      padding: 16px;
      background: var(--subtle);
      border-radius: 14px;
      margin-bottom: 18px;
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
    }

    .search-input {
      width: 100%;
      background: var(--bg);
      border: 1px solid var(--border);
      padding: 10px 12px;
      border-radius: 10px;
      color: var(--fg);
      font-size: 0.92rem;
      outline: none;
      transition: border-color 0.2s, box-shadow 0.2s;
    }

    .search-input:focus {
      border-color: var(--fg);
      box-shadow: 0 0 0 3px color-mix(in srgb, var(--fg) 10%, transparent);
    }

    .btn {
      border: none;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 7px;
      padding: 0 14px;
      min-height: 40px;
      transition: transform .08s ease, opacity .2s;
    }

    .btn:active { transform: translateY(1px); }

    .btn-add {
      background: var(--accent);
      color: var(--bg);
      min-width: 118px;
    }

    .btn-soft {
      background: var(--bg);
      color: var(--fg);
      border: 1px solid var(--border);
      min-width: 44px;
      padding: 0 10px;
    }

    .controls {
      display: grid;
      grid-template-columns: 1fr auto auto;
      gap: 12px;
      margin-bottom: 16px;
    }

    .vault-shell {
      border: 1px solid var(--border);
      border-radius: 14px;
      overflow: hidden;
      box-shadow: var(--shadow);
      background: var(--bg);
    }

    .vault-table {
      width: 100%;
      border-collapse: collapse;
    }

    .vault-table th {
      text-align: left;
      padding: 12px 14px;
      color: var(--muted);
      font-size: 0.74rem;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      border-bottom: 1px solid var(--border);
      background: var(--subtle);
    }

    .vault-table td {
      padding: 15px 14px;
      border-bottom: 1px solid var(--border);
      font-size: 0.92rem;
      vertical-align: middle;
    }

    .vault-table tr:hover td {
      background: color-mix(in srgb, var(--subtle) 75%, transparent);
    }

    .vault-table tr:last-child td {
      border-bottom: none;
    }

    .service-cell {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 600;
    }

    .icon-box {
      width: 30px;
      height: 30px;
      background: var(--subtle);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid var(--border);
    }

    .mono {
      font-family: "JetBrains Mono", monospace;
      font-size: 0.82rem;
      color: var(--muted);
    }

    .badge {
      padding: 4px 8px;
      background: var(--subtle);
      border: 1px solid var(--border);
      border-radius: 999px;
      font-size: 0.73rem;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .pwd-pill {
      font-family: "JetBrains Mono", monospace;
      font-size: 0.8rem;
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 5px 9px;
      background: var(--subtle);
      min-width: 132px;
      display: inline-flex;
      justify-content: center;
    }

    .action-btns {
      display: flex;
      gap: 7px;
      justify-content: flex-end;
    }

    .btn-ghost {
      background: var(--subtle);
      border: 1px solid var(--border);
      color: var(--muted);
      cursor: pointer;
      width: 30px;
      height: 30px;
      border-radius: 8px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .btn-ghost:hover {
      color: var(--fg);
      border-color: color-mix(in srgb, var(--fg) 28%, var(--border));
    }

    .btn-ghost.danger:hover {
      color: var(--danger);
      border-color: color-mix(in srgb, var(--danger) 40%, var(--border));
    }

    .empty {
      text-align: center;
      padding: 26px 16px;
      color: var(--muted);
      font-size: .9rem;
      border-top: 1px solid var(--border);
      background: var(--subtle);
    }

    .toast {
      position: fixed;
      right: 14px;
      bottom: 14px;
      background: var(--fg);
      color: var(--bg);
      border-radius: 10px;
      padding: 11px 13px;
      font-size: .83rem;
      opacity: 0;
      transform: translateY(10px);
      pointer-events: none;
      transition: .22s;
      box-shadow: var(--shadow);
      z-index: 9;
    }

    .toast.show {
      opacity: 1;
      transform: translateY(0);
    }

    @media (max-width: 920px) {
      .stats {
        grid-template-columns: 1fr;
      }

      .quick-form {
        grid-template-columns: 1fr;
      }

      .controls {
        grid-template-columns: 1fr 46px 46px;
      }

      .vault-table thead {
        display: none;
      }

      .vault-table,
      .vault-table tbody,
      .vault-table tr,
      .vault-table td {
        display: block;
        width: 100%;
      }

      .vault-table tr {
        border-bottom: 1px solid var(--border);
      }

      .vault-table td {
        border: none;
        padding: 8px 14px;
      }

      .vault-table td[data-label]::before {
        content: attr(data-label) ": ";
        color: var(--muted);
        font-size: .75rem;
        text-transform: uppercase;
        letter-spacing: .05em;
      }

      .action-btns {
        justify-content: flex-start;
      }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <header>
      <div class="logo">
        <i data-lucide="command"></i>
        <span>KeyVault_</span>
      </div>
      <div class="status">
        <span class="status-dot"></span>
        <span>STATUS: ENCRYPTED_AES_256</span>
      </div>
    </header>

    <section class="stats">
      <article class="stat-card">
        <div class="stat-top"><span>Credenciales</span><i data-lucide="key-round" size="16"></i></div>
        <div class="stat-value" id="statTotal">0</div>
      </article>
      <article class="stat-card">
        <div class="stat-top"><span>Seguridad</span><i data-lucide="shield-check" size="16"></i></div>
        <div class="stat-value">ALTA</div>
      </article>
      <article class="stat-card">
        <div class="stat-top"><span>Último cambio</span><i data-lucide="clock-3" size="16"></i></div>
        <div class="stat-value" style="font-size:1rem;" id="statUpdated">--</div>
      </article>
    </section>

    <form class="quick-form" id="credentialForm">
      <input id="serviceInput" type="text" class="search-input" placeholder="Servicio (ej: GitHub)" required>
      <input id="userInput" type="text" class="search-input" placeholder="Usuario">
      <input id="passInput" type="text" class="search-input" placeholder="Contraseña" required>
      <button type="button" class="btn btn-soft" id="generateBtn" title="Generar contraseña">
        <i data-lucide="wand-sparkles" size="18"></i>
      </button>
      <button type="submit" class="btn btn-add">
        <i data-lucide="plus" size="16"></i>
        Guardar
      </button>
    </form>

    <div class="controls">
      <input id="filterInput" type="text" class="search-input" placeholder="Filtrar claves por servicio o usuario...">
      <button class="btn btn-soft" title="Filtrar">
        <i data-lucide="list-filter" size="18"></i>
      </button>
      <button class="btn btn-soft" title="Ajustes">
        <i data-lucide="settings" size="18"></i>
      </button>
    </div>

    <section class="vault-shell">
      <table class="vault-table">
        <thead>
          <tr>
            <th>Servicio</th>
            <th>Usuario</th>
            <th>Contraseña</th>
            <th style="text-align: right;">Acciones</th>
          </tr>
        </thead>
        <tbody id="vaultBody"></tbody>
      </table>
      <div id="emptyState" class="empty" style="display:none;">No hay resultados con ese filtro.</div>
    </section>
  </div>

  <div id="toast" class="toast"></div>

  <script>
    const vault = [
      { id: crypto.randomUUID(), service: "GitHub", user: "blue.panda.opn", pass: "A9x!m2#Qv3", icon: "github", createdAt: new Date() },
      { id: crypto.randomUUID(), service: "Vercel App", user: "admin@clav.io", pass: "X7!kZ2_93Lm", icon: "layout", createdAt: new Date() }
    ];

    const vaultBody = document.getElementById("vaultBody");
    const filterInput = document.getElementById("filterInput");
    const form = document.getElementById("credentialForm");
    const serviceInput = document.getElementById("serviceInput");
    const userInput = document.getElementById("userInput");
    const passInput = document.getElementById("passInput");
    const generateBtn = document.getElementById("generateBtn");
    const statTotal = document.getElementById("statTotal");
    const statUpdated = document.getElementById("statUpdated");
    const emptyState = document.getElementById("emptyState");
    const toast = document.getElementById("toast");

    function showToast(msg) {
      toast.textContent = msg;
      toast.classList.add("show");
      setTimeout(() => toast.classList.remove("show"), 1900);
    }

    function generatePassword(len = 14) {
      const chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+";
      const bytes = crypto.getRandomValues(new Uint32Array(len));
      return Array.from(bytes).map(n => chars[n % chars.length]).join("");
    }

    function formatDate(date) {
      return new Intl.DateTimeFormat("es-ES", { dateStyle: "short", timeStyle: "short" }).format(date);
    }

    function updateStats(items) {
      statTotal.textContent = items.length;
      statUpdated.textContent = items.length ? formatDate(items[0].createdAt) : "--";
    }

    function render(items) {
      vaultBody.innerHTML = "";

      if (!items.length) {
        emptyState.style.display = "block";
        updateStats(items);
        return;
      }

      emptyState.style.display = "none";

      items.forEach(item => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td data-label="Servicio">
            <div class="service-cell">
              <div class="icon-box"><i data-lucide="${item.icon || "key-round"}" size="16"></i></div>
              ${item.service}
            </div>
          </td>
          <td data-label="Usuario" class="mono">${item.user || "Sin usuario"}</td>
          <td data-label="Contraseña">
            <span class="pwd-pill" data-pass-id="${item.id}">••••••••••••</span>
          </td>
          <td data-label="Acciones">
            <div class="action-btns">
              <button class="btn-ghost" data-action="reveal" data-id="${item.id}" title="Mostrar/Ocultar"><i data-lucide="eye" size="16"></i></button>
              <button class="btn-ghost" data-action="copy" data-id="${item.id}" title="Copiar"><i data-lucide="copy" size="16"></i></button>
              <button class="btn-ghost danger" data-action="delete" data-id="${item.id}" title="Eliminar"><i data-lucide="trash" size="16"></i></button>
            </div>
          </td>
        `;
        vaultBody.appendChild(tr);
      });

      updateStats(items);
      lucide.createIcons();
    }

    function applyFilter() {
      const q = filterInput.value.toLowerCase().trim();
      const filtered = vault.filter(item =>
        item.service.toLowerCase().includes(q) || item.user.toLowerCase().includes(q)
      );
      render(filtered);
    }

    generateBtn.addEventListener("click", () => {
      passInput.value = generatePassword();
      showToast("Contraseña segura generada");
    });

    form.addEventListener("submit", (e) => {
      e.preventDefault();
      vault.unshift({
        id: crypto.randomUUID(),
        service: serviceInput.value.trim(),
        user: userInput.value.trim(),
        pass: passInput.value.trim(),
        icon: "lock-keyhole",
        createdAt: new Date()
      });
      form.reset();
      applyFilter();
      showToast("Credencial guardada");
    });

    filterInput.addEventListener("input", applyFilter);

    vaultBody.addEventListener("click", async (e) => {
      const btn = e.target.closest("button[data-action]");
      if (!btn) return;

      const id = btn.dataset.id;
      const action = btn.dataset.action;
      const item = vault.find(v => v.id === id);
      if (!item) return;

      if (action === "delete") {
        const idx = vault.findIndex(v => v.id === id);
        vault.splice(idx, 1);
        applyFilter();
        showToast("Credencial eliminada");
      }

      if (action === "copy") {
        await navigator.clipboard.writeText(item.pass);
        showToast("Contraseña copiada");
      }

      if (action === "reveal") {
        const pill = document.querySelector(`[data-pass-id="${id}"]`);
        const hidden = pill.textContent.includes("•");
        pill.textContent = hidden ? item.pass : "••••••••••••";
        btn.innerHTML = hidden
          ? '<i data-lucide="eye-off" size="16"></i>'
          : '<i data-lucide="eye" size="16"></i>';
        lucide.createIcons();
      }
    });

    render(vault);
    lucide.createIcons();
  </script>
</body>
</html>
